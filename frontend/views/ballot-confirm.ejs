<div class="ballot-container">
  <div class="ballot-sidebar">
    <a href="/elections" class="back-link">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M20 11H7.83L13.42 5.41L12 4L4 12L12 20L13.41 18.59L7.83 13H20V11Z" fill="currentColor"/>
      </svg>
    </a>
    
    <div class="question-nav">
      <h2>Overview</h2>
      
      <div class="question-nav-list">
        <a href="#question-1" class="question-nav-item">
          <div class="question-nav-number">Question 1</div>
          <div class="question-nav-title">President and Vice President of the United States</div>
        </a>
        
        <a href="#question-2" class="question-nav-item">
          <div class="question-nav-number">Question 2</div>
          <div class="question-nav-title">US House of Representatives</div>
        </a>
        
        <a href="#question-3" class="question-nav-item">
          <div class="question-nav-number">Question 3</div>
          <div class="question-nav-title">[State] Governor</div>
        </a>
        
        <a href="#question-4" class="question-nav-item">
          <div class="question-nav-number">Question 4</div>
          <div class="question-nav-title">[State] Lieutenant Governor</div>
        </a>
        
        <a href="#question-5" class="question-nav-item">
          <div class="question-nav-number">Question 5</div>
          <div class="question-nav-title">[State] Attorney General</div>
        </a>
        
        <a href="#question-6" class="question-nav-item">
          <div class="question-nav-number">Question 6</div>
          <div class="question-nav-title">[State] Auditor</div>
        </a>
        
        <a href="#question-7" class="question-nav-item">
          <div class="question-nav-number">Question 7</div>
          <div class="question-nav-title">[State] Commissioner of Agriculture</div>
        </a>
        
        <a href="#question-8" class="question-nav-item">
          <div class="question-nav-number">Question 8</div>
          <div class="question-nav-title">[State] Commissioner of Insurance</div>
        </a>
        
        <a href="#question-9" class="question-nav-item">
          <div class="question-nav-number">Question 9</div>
          <div class="question-nav-title">[State] Commissioner of Labor</div>
        </a>
        
        <a href="#question-10" class="question-nav-item">
          <div class="question-nav-number">Question 10</div>
          <div class="question-nav-title">[State] Commissioner of State</div>
        </a>
        
        <a href="#question-11" class="question-nav-item">
          <div class="question-nav-number">Question 11</div>
          <div class="question-nav-title">[State] Superintendent of Public Instruction</div>
        </a>
      </div>
    </div>
  </div>
  
  <div class="ballot-content">
    <div class="ballot-header">
      <a href="/ballot/2024_presidential/summary" class="back-link">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M20 11H7.83L13.42 5.41L12 4L4 12L12 20L13.41 18.59L7.83 13H20V11Z" fill="currentColor"/>
        </svg>
        2024 Presidential Election - General Ballot
      </a>
      <div class="ballot-status">In progress</div>
    </div>
    
    <div class="confirm-modal">
      <div class="modal-content">
        <a href="/ballot/2024_presidential/summary" class="close-btn">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12L19 6.41Z" fill="#666"/>
          </svg>
        </a>
        
        <h2>Confirmation</h2>
        
        <p class="confirmation-text">
          You cannot change your response after. If you are sure you want to submit, enter your digital key below.
        </p>
        
        <div class="digital-key-input">
          <input type="password" id="digital-key" placeholder="Paste Your Digital Key Here">
        </div>
        
        <div class="confirm-actions">
          <button id="submit-btn" class="submit-btn">Submit
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M3.33325 8.00008H12.6666M12.6666 8.00008L7.99992 3.33341M12.6666 8.00008L7.99992 12.6667" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </button>
        </div>
      </div>
    </div>
    
    <div class="summary-card-bg">
      <div class="summary-items">
        <div class="summary-item" id="question-1">
          <div class="question-info">
            <div class="question-number">Question 1</div>
            <div class="question-title">President and Vice President of the United States</div>
          </div>
          
          <div class="answer-info">
            <div class="answer-name">
              <div class="answer-title">Kamala D. Harris</div>
              <div class="answer-subtitle">Tim Walz</div>
              <div class="answer-party">Democratic Party</div>
            </div>
          </div>
        </div>
        
        <div class="summary-item" id="question-2">
          <div class="question-info">
            <div class="question-number">Question 2</div>
            <div class="question-title">US House of Representatives</div>
          </div>
          
          <div class="answer-info">
            <div class="answer-name">
              <div class="answer-title">Sample Answer</div>
              <div class="answer-party">Sample Party</div>
            </div>
          </div>
        </div>
        
        <div class="summary-item" id="question-3">
          <div class="question-info">
            <div class="question-number">Question 3</div>
            <div class="question-title">[State] Governor</div>
          </div>
          
          <div class="answer-info">
            <div class="answer-name">
              <div class="answer-title">Sample Answer</div>
              <div class="answer-party">Sample Party</div>
            </div>
          </div>
        </div>
        
        <div class="summary-item" id="question-4">
          <div class="question-info">
            <div class="question-number">Question 4</div>
            <div class="question-title">[State] Lieutenant Governor</div>
          </div>
          
          <div class="answer-info">
            <div class="answer-name">
              <div class="no-answer">No selection made</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  // Submit button functionality
  document.getElementById('submit-btn').addEventListener('click', function() {
    const digitalKey = document.getElementById('digital-key').value;
    
    if (digitalKey.trim() === '') {
      alert('Please enter your digital key to submit your ballot.');
      return;
    }
    
    // Get the stored digital key from local storage
    const storedDigitalKey = localStorage.getItem('voterDigitalKey');
    
    if (digitalKey === storedDigitalKey) {
      // In a real app, we would send the vote data to the server here
      // For demo purposes, just redirect to success page
      window.location.href = '/ballot/2024_presidential/success';
    } else {
      // Show error for incorrect digital key
      const keyInput = document.getElementById('digital-key');
      keyInput.classList.add('error');
      
      // Add error message if it doesn't exist
      if (!document.querySelector('.key-error-message')) {
        const errorMessage = document.createElement('div');
        errorMessage.className = 'key-error-message';
        errorMessage.textContent = 'The digital key you entered is incorrect. Please try again.';
        keyInput.parentNode.appendChild(errorMessage);
      }
    }
  });
  
  // Navigation to specific question sections
  document.querySelectorAll('.question-nav-item').forEach(item => {
    item.addEventListener('click', function(e) {
      e.preventDefault();
      
      const targetId = this.getAttribute('href');
      const targetElement = document.querySelector(targetId);
      
      if (targetElement) {
        // Close the modal if it's open
        document.querySelector('.confirm-modal').style.display = 'none';
        
        // Scroll to the target element
        targetElement.scrollIntoView({ behavior: 'smooth' });
      }
    });
  });
</script>

<style>
  .ballot-container {
    display: flex;
    min-height: 100vh;
    background-color: #f5f7fa;
  }
  
  .ballot-sidebar {
    width: 320px;
    background-color: white;
    border-right: 1px solid #eee;
    display: flex;
    flex-direction: column;
    padding: 20px 0;
  }
  
  .back-link {
    display: flex;
    align-items: center;
    color: var(--text-color);
    text-decoration: none;
    padding: 10px 20px;
    margin-bottom: 20px;
  }
  
  .question-nav {
    display: flex;
    flex-direction: column;
    flex: 1;
    padding: 0 20px;
  }
  
  .question-nav h2 {
    font-size: 18px;
    font-weight: 600;
    margin-bottom: 20px;
    color: var(--text-color);
    text-align: left;
  }
  
  .question-nav-list {
    display: flex;
    flex-direction: column;
    gap: 10px;
    overflow-y: auto;
    flex: 1;
  }
  
  .question-nav-item {
    display: flex;
    flex-direction: column;
    text-decoration: none;
    color: var(--text-color);
    padding: 10px;
    border-radius: 6px;
  }
  
  .question-nav-item:hover {
    background-color: rgba(66, 103, 178, 0.05);
  }
  
  .question-nav-number {
    font-size: 12px;
    color: var(--light-text);
    margin-bottom: 4px;
  }
  
  .question-nav-title {
    font-size: 14px;
    font-weight: 500;
  }
  
  .ballot-content {
    flex: 1;
    padding: 30px;
    max-width: 800px;
    margin: 0 auto;
    position: relative;
  }
  
  .ballot-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 30px;
  }
  
  .ballot-header .back-link {
    font-size: 18px;
    font-weight: 500;
    margin-bottom: 0;
    padding: 0;
  }
  
  .ballot-header svg {
    margin-right: 8px;
  }
  
  .ballot-status {
    color: var(--accent-color);
    font-size: 14px;
    font-weight: 500;
  }
  
  .confirm-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
    background-color: rgba(0, 0, 0, 0.5);
    z-index: 1000;
  }
  
  .modal-content {
    position: relative;
    width: 500px;
    background-color: white;
    border-radius: 10px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
    padding: 30px;
  }
  
  .close-btn {
    position: absolute;
    top: 15px;
    right: 15px;
    color: #666;
  }
  
  .modal-content h2 {
    font-size: 20px;
    font-weight: 600;
    margin-bottom: 20px;
    color: var(--text-color);
    text-align: center;
  }
  
  .confirmation-text {
    text-align: center;
    margin-bottom: 30px;
    color: var(--text-color);
  }
  
  .digital-key-input {
    margin-bottom: 30px;
  }
  
  .digital-key-input input {
    width: 100%;
    padding: 12px;
    border: 1px solid #ddd;
    border-radius: 6px;
    font-size: 16px;
    letter-spacing: 2px;
    text-align: center;
  }
  
  .digital-key-input input.error {
    border-color: var(--error-color);
    background-color: rgba(220, 53, 69, 0.05);
  }
  
  .key-error-message {
    color: var(--error-color);
    font-size: 14px;
    margin-top: 8px;
    text-align: center;
  }
  
  .confirm-actions {
    display: flex;
    justify-content: center;
  }
  
  .submit-btn {
    display: flex;
    align-items: center;
    gap: 10px;
    background-color: var(--accent-color);
    color: white;
    border: none;
    padding: 12px 30px;
    border-radius: 6px;
    font-weight: 500;
    cursor: pointer;
    transition: background-color 0.3s;
  }
  
  .submit-btn:hover {
    background-color: var(--primary-color);
  }
  
  .summary-card-bg {
    opacity: 0.3;
    pointer-events: none;
    background-color: white;
    border-radius: 10px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
    padding: 30px;
  }
  
  .summary-items {
    display: flex;
    flex-direction: column;
    gap: 20px;
  }
  
  .summary-item {
    display: flex;
    flex-direction: column;
    padding-bottom: 20px;
    border-bottom: 1px solid #eee;
  }
  
  .question-info {
    margin-bottom: 15px;
  }
  
  .question-number {
    font-size: 14px;
    color: var(--light-text);
    margin-bottom: 5px;
  }
  
  .question-title {
    font-size: 16px;
    font-weight: 500;
    color: var(--text-color);
  }
  
  .answer-info {
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  
  .answer-name {
    display: flex;
    flex-direction: column;
  }
  
  .answer-title {
    font-weight: 500;
    margin-bottom: 2px;
  }
  
  .answer-subtitle {
    font-size: 14px;
    margin-bottom: 2px;
  }
  
  .answer-party {
    font-size: 12px;
    color: var(--light-text);
    font-style: italic;
  }
  
  .no-answer {
    color: var(--error-color);
    font-style: italic;
  }
</style> 